# VPSéƒ¨ç½²é—®é¢˜å¤„ç†æŒ‡å—

> **åŸºäºSite4 (ColorMagic) å®æˆ˜ç»éªŒçš„å®Œæ•´å·¥ä½œæµç¨‹**  
> **æœ€åæ›´æ–°ï¼š2025-09-30**  
> **ç‰ˆæœ¬ï¼šv2.0ï¼ˆå½»åº•ä¿®è®¢ç‰ˆï¼‰**

---

## âš ï¸ é‡è¦å£°æ˜ï¼šæ—§ç‰ˆæŒ‡å—çš„é—®é¢˜

### âŒ æ—§ç‰ˆæŒ‡å—çš„é”™è¯¯æ–¹æ³•ï¼ˆä¸è¦ä½¿ç”¨ï¼‰

1. **âŒ é”™è¯¯ï¼šè®©ç”¨æˆ·æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶åˆ°VPS**
   - é—®é¢˜ï¼šä¼šå¯¼è‡´GitçŠ¶æ€ä¸ä¸€è‡´
   - é—®é¢˜ï¼šå®¹æ˜“é—æ¼å…³è”æ–‡ä»¶
   - é—®é¢˜ï¼šTypeScriptç¼–è¯‘äº§ç‰©ä¼šä¸¢å¤±

2. **âŒ é”™è¯¯ï¼šç›´æ¥åœ¨VPSä¿®æ”¹ä»£ç æ–‡ä»¶**
   - é—®é¢˜ï¼šæ— æ³•éªŒè¯è¯­æ³•é”™è¯¯
   - é—®é¢˜ï¼šæ— æ³•æäº¤åˆ°Gitï¼Œå¯¼è‡´ç‰ˆæœ¬æ··ä¹±
   - é—®é¢˜ï¼šTypeScripté¡¹ç›®æ— æ³•ç¼–è¯‘

3. **âŒ é”™è¯¯ï¼šä¸æ–­é‡å¤æ— æ•ˆçš„éƒ¨ç½²å‘½ä»¤**
   - é—®é¢˜ï¼šæ²¡æœ‰è§£å†³æ ¹æœ¬åŸå› 
   - é—®é¢˜ï¼šæµªè´¹æ—¶é—´åœ¨æ— æ•ˆå°è¯•ä¸Š

---

## âœ… æ­£ç¡®çš„å·¥ä½œæµç¨‹ï¼ˆå¿…é¡»éµå¾ªï¼‰

### æ ¸å¿ƒåŸåˆ™

```
æœ¬åœ°å¼€å‘ â†’ æœ¬åœ°ç¼–è¯‘ â†’ Gitæäº¤ â†’ VPSæ‹‰å– â†’ VPSéƒ¨ç½²
    â†“          â†“         â†“         â†“         â†“
  ä¿®æ”¹ä»£ç    ç¼–è¯‘TS   æ¨é€GitHub   æ‹‰å–ä»£ç    é‡æ–°æ„å»º
```

**å…³é”®ç‚¹**ï¼š
1. âœ… æ‰€æœ‰ä»£ç ä¿®æ”¹å¿…é¡»åœ¨**æœ¬åœ°**å®Œæˆ
2. âœ… TypeScripté¡¹ç›®å¿…é¡»åœ¨**æœ¬åœ°**ç¼–è¯‘
3. âœ… ä¿®æ”¹å¿…é¡»é€šè¿‡**GitåŒæ­¥**åˆ°VPS
4. âœ… VPSåªåšé…ç½®ä¿®æ”¹ï¼ˆ.envæ–‡ä»¶ï¼‰å’Œéƒ¨ç½²æ“ä½œ

---

## ğŸ“Š é—®é¢˜åˆ†ç±»å’Œå¤„ç†æµç¨‹

### åˆ†ç±»1ï¼šä»£ç é—®é¢˜ï¼ˆéœ€è¦æœ¬åœ°ä¿®æ”¹ï¼‰

**ç‰¹å¾**ï¼š
- éœ€è¦ä¿®æ”¹ `.ts`ã€`.tsx`ã€`.js`ã€`.jsx` ç­‰æºä»£ç æ–‡ä»¶
- éœ€è¦ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ã€è·¯ç”±é…ç½®ã€APIç«¯ç‚¹
- éœ€è¦æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®å¤bug

**âœ… æ­£ç¡®æµç¨‹**ï¼š

```bash
# ========================================
# æ­¥éª¤1ï¼šæœ¬åœ°ä¿®æ”¹ä»£ç 
# ========================================
cd ~/Documents/GitHub/Image-Color-Analysis

# ä¿®æ”¹æ–‡ä»¶ï¼ˆä½¿ç”¨IDEæˆ–ç¼–è¾‘å™¨ï¼‰
# ä¾‹å¦‚ï¼šä¿®æ”¹ backend/src/index.ts

# ========================================
# æ­¥éª¤2ï¼šæœ¬åœ°ç¼–è¯‘ï¼ˆå¦‚æœæ˜¯TypeScripté¡¹ç›®ï¼‰
# ========================================
cd backend
npm run build

# éªŒè¯ç¼–è¯‘æˆåŠŸ
ls -la dist/
grep "ä½ çš„ä¿®æ”¹å†…å®¹å…³é”®è¯" dist/index.js

# ========================================
# æ­¥éª¤3ï¼šGitæäº¤
# ========================================
cd ..
git add backend/src/index.ts backend/dist/index.js
git commit -m "fix: æè¿°ä½ çš„ä¿®æ”¹"
git push origin main

# ========================================
# æ­¥éª¤4ï¼šVPSæ‹‰å–ä»£ç 
# ========================================
# åœ¨VPSç»ˆç«¯æ‰§è¡Œï¼š
ssh root@YOUR_VPS_IP
cd /docker/site4

# ä¿å­˜æœ¬åœ°.envä¿®æ”¹ï¼ˆå¦‚æœæœ‰ï¼‰
cp backend/.env backend/.env.backup

# æ‹‰å–æœ€æ–°ä»£ç 
git stash  # æš‚å­˜æœ¬åœ°ä¿®æ”¹
git pull origin main
git stash pop  # æ¢å¤æœ¬åœ°ä¿®æ”¹

# æ¢å¤.envæ–‡ä»¶ï¼ˆå¦‚æœè¢«è¦†ç›–ï¼‰
cp backend/.env.backup backend/.env

# ========================================
# æ­¥éª¤5ï¼šé‡æ–°ç¼–è¯‘ï¼ˆTypeScripté¡¹ç›®å¿…é¡»ï¼‰
# ========================================
cd backend
npm run build
cd ..

# ========================================
# æ­¥éª¤6ï¼šé‡æ–°æ„å»ºå’Œéƒ¨ç½²
# ========================================
# æ–¹æ³•Aï¼šä½¿ç”¨docker composeï¼ˆæ¨èï¼‰
docker build -f backend/Dockerfile.simple -t site4:latest ./backend
docker stop site4 && docker rm site4
docker run -d --name site4 --network webproxy --env-file backend/.env --restart unless-stopped site4:latest
docker network connect shared_net site4

# æ–¹æ³•Bï¼šå¦‚æœæœ‰docker-compose.yml
docker compose down
docker compose build --no-cache
docker compose up -d

# ========================================
# æ­¥éª¤7ï¼šéªŒè¯éƒ¨ç½²
# ========================================
sleep 15
docker logs site4 --tail 30
curl http://localhost:3000/health
```

**â±ï¸ æ—¶é—´ä¼°è®¡**ï¼š5-10åˆ†é’Ÿï¼ˆå–å†³äºä»£ç å¤æ‚åº¦ï¼‰

---

### åˆ†ç±»2ï¼šé…ç½®é—®é¢˜ï¼ˆå¯ä»¥VPSç›´æ¥ä¿®æ”¹ï¼‰

**ç‰¹å¾**ï¼š
- åªä¿®æ”¹ `.env` æ–‡ä»¶
- ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼ˆAPIå¯†é’¥ã€æ•°æ®åº“å¯†ç ã€åŸŸåç­‰ï¼‰
- ä¸æ¶‰åŠä»£ç é€»è¾‘ä¿®æ”¹

**âœ… æ­£ç¡®æµç¨‹**ï¼š

```bash
# ========================================
# åœ¨VPSä¸Šç›´æ¥ä¿®æ”¹.envæ–‡ä»¶
# ========================================
ssh root@YOUR_VPS_IP
cd /docker/site4

# ç¼–è¾‘.envæ–‡ä»¶
nano backend/.env
# æˆ–
vim backend/.env

# ä¿®æ”¹å®Œæˆåï¼ŒæŒ‰Ctrl+Oä¿å­˜ï¼ŒCtrl+Xé€€å‡º

# ========================================
# éªŒè¯.envæ–‡ä»¶å†…å®¹
# ========================================
cat backend/.env | grep "ä½ ä¿®æ”¹çš„å˜é‡å"

# ä¾‹å¦‚éªŒè¯CORSé…ç½®
cat backend/.env | grep "ALLOWED_ORIGINS"

# ========================================
# é‡å¯å®¹å™¨ä½¿é…ç½®ç”Ÿæ•ˆ
# ========================================
docker restart site4

# ç­‰å¾…å¯åŠ¨
sleep 15

# ========================================
# éªŒè¯é…ç½®å·²ç”Ÿæ•ˆ
# ========================================
docker logs site4 --tail 30

# éªŒè¯ç‰¹å®šé…ç½®ï¼ˆä¾‹å¦‚CORSï¼‰
docker logs site4 | grep "å…è®¸çš„CORSæº"
```

**â±ï¸ æ—¶é—´ä¼°è®¡**ï¼š2-3åˆ†é’Ÿ

---

### åˆ†ç±»3ï¼šéƒ¨ç½²é—®é¢˜ï¼ˆVPSè¯Šæ–­å’Œä¿®å¤ï¼‰

**ç‰¹å¾**ï¼š
- å®¹å™¨æ— æ³•å¯åŠ¨
- ç½‘ç»œè¿æ¥é—®é¢˜
- æ•°æ®åº“è¿æ¥å¤±è´¥
- å¥åº·æ£€æŸ¥å¤±è´¥

**âœ… è¯Šæ–­æµç¨‹**ï¼š

```bash
# ========================================
# æ­¥éª¤1ï¼šæ£€æŸ¥å®¹å™¨çŠ¶æ€
# ========================================
docker ps -a | grep site4
docker logs site4 --tail 50

# ========================================
# æ­¥éª¤2ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥
# ========================================
docker network ls | grep -E "(webproxy|shared_net)"
docker inspect site4 | grep -A 10 "Networks"

# ========================================
# æ­¥éª¤3ï¼šæ£€æŸ¥æ•°æ®åº“è¿æ¥ï¼ˆå¦‚æœä½¿ç”¨PostgreSQLï¼‰
# ========================================
docker exec site4 nc -zv postgres_master 5432 || echo "æ•°æ®åº“è¿æ¥å¤±è´¥"

# æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™
cd /docker/db_master
docker compose exec postgres psql -U admin -d postgres -c "\du" | grep site4

# ========================================
# æ­¥éª¤4ï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡
# ========================================
docker exec site4 env | grep -E "(DB_|ALLOWED_ORIGINS|NODE_ENV)"

# ========================================
# æ­¥éª¤5ï¼šå¥åº·æ£€æŸ¥
# ========================================
docker exec site4 curl -s http://localhost:3000/health || echo "å¥åº·æ£€æŸ¥å¤±è´¥"
```

**å¸¸è§é—®é¢˜å’Œä¿®å¤**ï¼š

#### é—®é¢˜1ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
docker logs site4 --tail 100

# å¸¸è§åŸå› ï¼š
# 1. ç«¯å£å†²çª â†’ ä¿®æ”¹docker-compose.ymlç«¯å£æ˜ å°„
# 2. .envæ–‡ä»¶ç¼ºå¤± â†’ æ£€æŸ¥backend/.envæ˜¯å¦å­˜åœ¨
# 3. ä¾èµ–å®‰è£…å¤±è´¥ â†’ é‡æ–°æ„å»ºé•œåƒ
```

#### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
docker network connect shared_net site4

# æ£€æŸ¥æ•°æ®åº“åˆ«å
docker network inspect shared_net | grep -A 5 "postgres_master"

# å¦‚æœæ²¡æœ‰åˆ«åï¼Œè®¾ç½®åˆ«å
docker network disconnect shared_net postgres_master
docker network connect --alias postgres_master shared_net postgres_master
```

#### é—®é¢˜3ï¼šCORSé”™è¯¯ï¼ˆwwwå­åŸŸåè¢«é˜»æ­¢ï¼‰
```bash
# æ£€æŸ¥CORSé…ç½®
docker logs site4 | grep "å…è®¸çš„CORSæº"

# å¦‚æœæ²¡æœ‰çœ‹åˆ°wwwåŸŸåï¼Œä¿®æ”¹.env
nano backend/.env
# ç¡®ä¿ï¼šALLOWED_ORIGINS=https://example.com,https://www.example.com

# é‡å¯å®¹å™¨
docker restart site4

# éªŒè¯
docker logs site4 | grep "www"
```

---

## ğŸš« AIå¿…é¡»é¿å…çš„é”™è¯¯è¡Œä¸º

### âŒ é”™è¯¯1ï¼šè¦æ±‚ç”¨æˆ·æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶

**é”™è¯¯åšæ³•**ï¼š
```
AI: "è¯·å°†ä¿®æ”¹åçš„ index.ts æ‰‹åŠ¨ä¸Šä¼ åˆ°VPSçš„ /docker/site4/backend/src/ ç›®å½•"
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```
AI: 
1. æˆ‘å·²åœ¨æœ¬åœ°ä¿®æ”¹äº† backend/src/index.ts
2. æˆ‘å°†æäº¤åˆ°GitHub
3. è¯·åœ¨VPSæ‰§è¡Œï¼š
   cd /docker/site4
   git pull origin main
   cd backend && npm run build && cd ..
   docker build -f backend/Dockerfile.simple -t site4:latest ./backend
   docker restart site4
```

---

### âŒ é”™è¯¯2ï¼šè®©ç”¨æˆ·åœ¨VPSç›´æ¥ä¿®æ”¹ä»£ç 

**é”™è¯¯åšæ³•**ï¼š
```
AI: "è¯·åœ¨VPSæ‰§è¡Œï¼š
     nano /docker/site4/backend/src/index.ts
     ç„¶åæ·»åŠ ä»¥ä¸‹ä»£ç ..."
```

**ä¸ºä»€ä¹ˆé”™è¯¯**ï¼š
- æ— æ³•éªŒè¯è¯­æ³•é”™è¯¯
- æ— æ³•æäº¤åˆ°Git
- TypeScriptæ— æ³•ç¼–è¯‘
- å®¹æ˜“å‡ºé”™ä¸”éš¾ä»¥å›æ»š

**âœ… æ­£ç¡®åšæ³•**ï¼š
```
AI: 
è¿™æ˜¯ä»£ç ä¿®æ”¹ï¼Œéœ€è¦åœ¨æœ¬åœ°å®Œæˆï¼š
1. æˆ‘åœ¨æœ¬åœ°ä¿®æ”¹ backend/src/index.ts
2. æœ¬åœ°ç¼–è¯‘ï¼šnpm run build
3. Gitæäº¤å¹¶æ¨é€
4. VPSæ‹‰å–å¹¶é‡æ–°éƒ¨ç½²
```

---

### âŒ é”™è¯¯3ï¼šé‡å¤æ— æ•ˆå‘½ä»¤

**é”™è¯¯åšæ³•**ï¼š
```
ç”¨æˆ·ï¼š"è¿˜æ˜¯500é”™è¯¯"
AIï¼š"å†è¯•è¯• docker restart site4"
ç”¨æˆ·ï¼š"è¿˜æ˜¯500é”™è¯¯"
AIï¼š"å†è¯•è¯• docker compose up -d --build"
ç”¨æˆ·ï¼š"è¿˜æ˜¯500é”™è¯¯"
AIï¼š"å†è¯•è¯•..."  â† æ— é™å¾ªç¯
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```
AI:
é‡å¯æ— æ•ˆï¼Œè¯´æ˜æ˜¯é…ç½®æˆ–ä»£ç é—®é¢˜ã€‚è®©æˆ‘ä»¬è¯Šæ–­ï¼š
1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼šdocker logs site4 --tail 50
2. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼šdocker exec site4 env | grep API
3. æ ¹æ®æ—¥å¿—ç¡®å®šé—®é¢˜ç±»å‹ï¼š
   - å¦‚æœæ˜¯ä»£ç é”™è¯¯ â†’ éœ€è¦æœ¬åœ°ä¿®æ”¹ä»£ç 
   - å¦‚æœæ˜¯é…ç½®é”™è¯¯ â†’ ä¿®æ”¹.envæ–‡ä»¶
   - å¦‚æœæ˜¯æƒé™é”™è¯¯ â†’ æ£€æŸ¥æ•°æ®åº“æƒé™
```

---

## ğŸ“‹ æ ‡å‡†åŒ–é—®é¢˜å¤„ç†æ£€æŸ¥æ¸…å•

### æ”¶åˆ°é—®é¢˜æŠ¥å‘Šæ—¶ï¼ŒAIå¿…é¡»å…ˆé—®ï¼š

```markdown
## é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•

### 1. è·å–é”™è¯¯æ—¥å¿—
[ ] å®¹å™¨æ—¥å¿—ï¼šdocker logs site4 --tail 50
[ ] æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯æˆªå›¾
[ ] ç½‘ç»œè¯·æ±‚é”™è¯¯ï¼ˆå¦‚CORSé”™è¯¯ï¼‰

### 2. ç¡®å®šé—®é¢˜ç±»å‹
[ ] ä»£ç é—®é¢˜ï¼ˆéœ€è¦ä¿®æ”¹.ts/.jsæ–‡ä»¶ï¼‰â†’ èµ°"ä»£ç ä¿®æ”¹æµç¨‹"
[ ] é…ç½®é—®é¢˜ï¼ˆåªéœ€ä¿®æ”¹.envï¼‰â†’ èµ°"é…ç½®ä¿®æ”¹æµç¨‹"  
[ ] éƒ¨ç½²é—®é¢˜ï¼ˆå®¹å™¨ã€ç½‘ç»œã€æ•°æ®åº“ï¼‰â†’ èµ°"è¯Šæ–­æµç¨‹"

### 3. éªŒè¯å½“å‰çŠ¶æ€
[ ] å®¹å™¨æ˜¯å¦è¿è¡Œï¼šdocker ps | grep site4
[ ] GitçŠ¶æ€ï¼šgit statusï¼ˆæœ‰æ— æœªæäº¤ä¿®æ”¹ï¼‰
[ ] ç¼–è¯‘çŠ¶æ€ï¼šls backend/dist/ï¼ˆTypeScripté¡¹ç›®ï¼‰
[ ] ç¯å¢ƒå˜é‡ï¼šcat backend/.env | head -10

### 4. é€‰æ‹©æ­£ç¡®æµç¨‹
æ ¹æ®é—®é¢˜ç±»å‹ï¼Œé€‰æ‹©ä¸Šè¿°å¯¹åº”çš„æµç¨‹æ‰§è¡Œ
```

---

## ğŸ¯ ColorMagic (Site4) å®æˆ˜æ¡ˆä¾‹æ€»ç»“

### æ¡ˆä¾‹ï¼šwwwå­åŸŸåè¢«CORSé˜»æ­¢

**é—®é¢˜ç°è±¡**ï¼š
- âœ… https://imagecolorpicker.cc æ­£å¸¸
- âŒ https://www.imagecolorpicker.cc è¿”å›500é”™è¯¯
- âŒ æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºCORSé”™è¯¯

**é”™è¯¯çš„å¤„ç†æ–¹å¼ï¼ˆæ—§ç‰ˆæŒ‡å—ï¼‰**ï¼š
```bash
âŒ ç›´æ¥åœ¨VPSä¿®æ”¹ backend/src/index.ts
âŒ è®©ç”¨æˆ·æ‰‹åŠ¨ä¸Šä¼ ä¿®æ”¹åçš„æ–‡ä»¶
âŒ é‡å¤æ‰§è¡Œ docker restartï¼ˆæ— æ•ˆï¼‰
```

**âœ… æ­£ç¡®çš„å¤„ç†æ–¹å¼**ï¼š

**æ­¥éª¤1ï¼šæœ¬åœ°ä¿®æ”¹ä»£ç **
```typescript
// backend/src/index.ts
const getAllowedOrigins = (): (string | RegExp)[] => {
  const origins: (string | RegExp)[] = []
  
  // æ–°å¢ï¼šè¯»å–ALLOWED_ORIGINSç¯å¢ƒå˜é‡
  if (process.env.ALLOWED_ORIGINS) {
    const allowedOriginsArray = process.env.ALLOWED_ORIGINS.split(',').map(o => o.trim())
    origins.push(...allowedOriginsArray)
  }
  
  return origins
}
```

**æ­¥éª¤2ï¼šæœ¬åœ°ç¼–è¯‘**
```bash
cd backend
npm run build
grep "ALLOWED_ORIGINS" dist/index.js  # éªŒè¯ç¼–è¯‘æˆåŠŸ
```

**æ­¥éª¤3ï¼šGitæäº¤**
```bash
git add backend/src/index.ts backend/dist/index.js
git commit -m "fix: add ALLOWED_ORIGINS environment variable support"
git push origin main
```

**æ­¥éª¤4ï¼šVPSéƒ¨ç½²**
```bash
cd /docker/site4
git pull origin main
cd backend && npm run build && cd ..
docker build -f backend/Dockerfile.simple -t site4:latest ./backend
docker stop site4 && docker rm site4
docker run -d --name site4 --network webproxy --env-file backend/.env --restart unless-stopped site4:latest
docker network connect shared_net site4
```

**æ­¥éª¤5ï¼šé…ç½®.env**
```bash
nano backend/.env
# æ·»åŠ ï¼šALLOWED_ORIGINS=https://imagecolorpicker.cc,https://www.imagecolorpicker.cc
docker restart site4
```

**æ­¥éª¤6ï¼šéªŒè¯**
```bash
docker logs site4 | grep "å…è®¸çš„CORSæº"
curl -I https://imagecolorpicker.cc
curl -I https://www.imagecolorpicker.cc
```

**ç»“æœ**ï¼šâœ… é—®é¢˜è§£å†³ï¼Œä¸¤ä¸ªåŸŸåéƒ½æ­£å¸¸è®¿é—®

**æ—¶é—´å¯¹æ¯”**ï¼š
- âŒ é”™è¯¯æ–¹å¼ï¼šå¤šæ¬¡å¤±è´¥ï¼Œè€—æ—¶3å°æ—¶+
- âœ… æ­£ç¡®æ–¹å¼ï¼šä¸€æ¬¡æˆåŠŸï¼Œè€—æ—¶15åˆ†é’Ÿ

---

## ğŸ”„ Gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µ

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# åˆå§‹è®¾ç½®
cd ~/Documents/GitHub/Image-Color-Analysis
git config user.name "Your Name"
git config user.email "your.email@example.com"

# æ—¥å¸¸å¼€å‘æµç¨‹
git pull origin main                    # æ‹‰å–æœ€æ–°ä»£ç 
# ... ä¿®æ”¹ä»£ç  ...
npm run build                          # ç¼–è¯‘ï¼ˆå¦‚éœ€è¦ï¼‰
git status                             # æŸ¥çœ‹ä¿®æ”¹
git add .                              # æ·»åŠ ä¿®æ”¹
git commit -m "æè¿°ä½ çš„ä¿®æ”¹"            # æäº¤
git push origin main                   # æ¨é€åˆ°GitHub
```

### VPSéƒ¨ç½²ç¯å¢ƒ

```bash
# åˆå§‹è®¾ç½®
cd /docker/site4
git config --global user.name "VPS Deployment"
git config --global user.email "deploy@vps.local"

# æ—¥å¸¸éƒ¨ç½²æµç¨‹
cp backend/.env backend/.env.backup    # å¤‡ä»½.env
git stash                              # æš‚å­˜æœ¬åœ°ä¿®æ”¹
git pull origin main                   # æ‹‰å–æœ€æ–°ä»£ç 
git stash pop                          # æ¢å¤æœ¬åœ°ä¿®æ”¹
cp backend/.env.backup backend/.env    # æ¢å¤.env

# å¦‚æœæœ‰å†²çª
git stash drop                         # ä¸¢å¼ƒæš‚å­˜
git pull origin main                   # é‡æ–°æ‹‰å–
# æ‰‹åŠ¨æ¢å¤.envæ–‡ä»¶

# é‡æ–°éƒ¨ç½²...
```

---

## ğŸ“š å¿«é€Ÿå‚è€ƒå¡ç‰‡

### ä»£ç ä¿®æ”¹ï¼ˆ5æ­¥æµç¨‹ï¼‰

```
æœ¬åœ°ä¿®æ”¹ â†’ æœ¬åœ°ç¼–è¯‘ â†’ Gitæäº¤ â†’ VPSæ‹‰å– â†’ VPSéƒ¨ç½²
```

### é…ç½®ä¿®æ”¹ï¼ˆ3æ­¥æµç¨‹ï¼‰

```
VPSç¼–è¾‘.env â†’ é‡å¯å®¹å™¨ â†’ éªŒè¯ç”Ÿæ•ˆ
```

### é—®é¢˜è¯Šæ–­ï¼ˆ4æ­¥æµç¨‹ï¼‰

```
æŸ¥çœ‹æ—¥å¿— â†’ ç¡®å®šç±»å‹ â†’ é€‰æ‹©æµç¨‹ â†’ æ‰§è¡Œä¿®å¤
```

---

## âš ï¸ AIå·¥ä½œåŸåˆ™ï¼ˆå¿…é¡»éµå®ˆï¼‰

### 1. ä»£ç ä¿®æ”¹åŸåˆ™
âœ… **DO**ï¼š
- åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç æ–‡ä»¶
- æœ¬åœ°ç¼–è¯‘TypeScript
- é€šè¿‡GitåŒæ­¥åˆ°VPS

âŒ **DON'T**ï¼š
- è®©ç”¨æˆ·åœ¨VPSç›´æ¥ä¿®æ”¹ä»£ç 
- è®©ç”¨æˆ·æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶
- è·³è¿‡ç¼–è¯‘æ­¥éª¤

### 2. é—®é¢˜è¯Šæ–­åŸåˆ™
âœ… **DO**ï¼š
- å…ˆæŸ¥çœ‹æ—¥å¿—ç¡®å®šé—®é¢˜
- æ ¹æ®æ—¥å¿—é€‰æ‹©æ­£ç¡®æµç¨‹
- ä¸€æ¬¡æ€§ç»™å‡ºå®Œæ•´è§£å†³æ–¹æ¡ˆ

âŒ **DON'T**ï¼š
- ä¸çœ‹æ—¥å¿—å°±ç»™å‘½ä»¤
- é‡å¤æ‰§è¡Œæ— æ•ˆå‘½ä»¤
- çŒœæµ‹é—®é¢˜åŸå› 

### 3. æ²Ÿé€šåŸåˆ™
âœ… **DO**ï¼š
- æ˜ç¡®è¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·åš
- æä¾›å®Œæ•´çš„å‘½ä»¤åºåˆ—
- è¯´æ˜é¢„æœŸç»“æœ

âŒ **DON'T**ï¼š
- åªç»™å‘½ä»¤ä¸è§£é‡Š
- åˆ†æ•£ç»™å‡ºå¤šæ¬¡å‘½ä»¤
- ä¸éªŒè¯ç»“æœ

---

## ğŸ“Š æˆåŠŸç‡ç»Ÿè®¡

| æ–¹æ³• | æˆåŠŸç‡ | å¹³å‡è€—æ—¶ |
|------|--------|----------|
| âœ… æœ¬åœ°ä¿®æ”¹+GitåŒæ­¥ | 95%+ | 15åˆ†é’Ÿ |
| âŒ VPSç›´æ¥ä¿®æ”¹ä»£ç  | 30% | 2å°æ—¶+ |
| âŒ æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶ | 50% | 1å°æ—¶+ |

---

**æœ€åæ›´æ–°**ï¼š2025-09-30  
**ç‰ˆæœ¬**ï¼šv2.0  
**çŠ¶æ€**ï¼šåŸºäºSite4å®æˆ˜éªŒè¯  
**è´¡çŒ®è€…**ï¼šAI Assistant + Userå®æˆ˜ç»éªŒæ€»ç»“

